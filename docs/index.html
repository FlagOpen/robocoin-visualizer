<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>RoboCOIN DataManage</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!-- 
        Standard Asset Structure:
        ./assets/
          ├── info/               - JSON index files (data_index.json, consolidated_datasets.json)
          ├── dataset_info/       - YAML metadata files (*.yml, *.yaml)
          ├── thumbnails/         - Thumbnail images (*.jpg, provided by assets/thumbnails)
          └── videos/             - MP4 video files (*.mp4)
    -->
    <link rel="stylesheet" href="./css/style.css?v=20251119-fix-tooltip">

    <link rel="icon" href="./favicon.ico" type="image/x-icon">
</head>
<body>
    <!-- 加载动画覆盖层 -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading datasets...</div>
        <div class="loading-progress" id="loadingProgress">0 / 0</div>
        <div class="loading-bar-container">
            <div class="loading-bar" id="loadingBar"></div>
        </div>
    </div>

    <div class="header-container">
        <div class="header-content">
            <h1 class="header-title">RoboCOIN DataManage</h1>
            <span class="version-badge">v1.0</span>
        </div>
    </div>
    
    <!-- Filter Control Bar -->
    <div class="filter-control-bar">
        <div class="filter-control-container">
            <button class="filter-trigger-btn" id="filterTriggerBtn">
                <span class="filter-trigger-text">Filters</span>
                <span class="filter-trigger-count" id="filterTriggerCount"></span>
            </button>
            
            <button class="btn-selection secondary" id="resetFiltersBtn">Reset</button>
            
            <div class="top-selection-container">
                <span class="selection-prefix-box">ALL</span>
                <button class="btn-toolbar primary" id="selectAllBtn">Select</button>
                <button class="btn-toolbar danger" id="deselectAllBtn">Deselect</button>
            </div>
            
            <div class="filter-search-container">
                <input type="text" id="searchBox" class="filter-search-input" placeholder="Search datasets...">
            </div>
            
            <div class="cart-actions-container">
                <button class="btn-toolbar success" id="addToListBtn">Add</button>
                <button class="btn-toolbar danger" id="deleteFromListBtn">Remove</button>
                <button class="btn-toolbar secondary" id="clearListBtn">Clear</button>
            </div>
            
            <div class="filter-stats-inline">
                <span class="stat-inline">
                    <span class="stat-label">Results:</span>
                    <strong id="filteredCount">0</strong>
                </span>
                <span class="stat-inline">
                    <span class="stat-label">Selected:</span>
                    <strong id="selectedCount">0</strong>
                </span>
            </div>
        </div>
        
        <!-- Active Filter Tags -->
        <div class="filter-tags-container" id="filterTagsContainer"></div>
    </div>

    <!-- Filter Dropdown Overlay -->
    <div class="filter-dropdown-overlay" id="filterDropdownOverlay">
        <div class="filter-dropdown" id="filterDropdown">
            <div class="filter-dropdown-header">
                <h3 class="filter-dropdown-title">Filter Datasets</h3>
                <div class="filter-finder">
                    <input type="text" 
                           id="filterFinderInput" 
                           class="filter-finder-input" 
                           placeholder="Search filter options... (Ctrl+F)"
                           autocomplete="off"
                           spellcheck="false">
                    <div class="filter-finder-nav">
                        <button class="filter-finder-btn" id="filterFinderPrev" title="Previous match (↑)" disabled>↑</button>
                        <button class="filter-finder-btn" id="filterFinderNext" title="Next match (↓)" disabled>↓</button>
                        <span class="filter-finder-count" id="filterFinderCount">0/0</span>
                    </div>
                </div>
            </div>
            <div class="filter-dropdown-content" id="filterGroups"></div>
            <div class="filter-dropdown-footer">
                <button class="filter-dropdown-done" id="filterDropdownClose">Done</button>
            </div>
        </div>
    </div>

    <div class="app-container">
        <!-- 中间视频网格区 -->
        <div class="video-panel">
            <div class="video-grid-container">
                <div class="video-grid" id="videoGrid"></div>
            </div>
        </div>

        <!-- 右侧选中面板 -->
        <div class="selection-panel">
            <div class="selection-header">
                <div class="selection-header-top">
                    <span id="selectionCount">0</span> items in cart
                    <input type="file" id="importFile" accept=".json" style="display: none;">
                </div>
            </div>
            
            <div class="selection-list" id="selectionList"></div>
            
            <div class="selection-footer">
                <div class="selection-actions">
                    <button class="btn-selection" id="importBtn">Import JSON</button>
                    <button class="btn-selection" id="exportBtn">Export JSON</button>
                </div>
                <div style="margin-top: 8px; margin-bottom: 8px;">
                    <div style="font-size: 12px; display: flex; align-items: center; gap: 8px; flex-wrap: wrap;">
                        <span style="font-weight: 500;">Hub Source:</span>
                        <div class="hub-buttons-container">
                            <button class="btn-hub active" id="hubBtnHuggingFace" data-hub="huggingface">HuggingFace</button>
                            <button class="btn-hub" id="hubBtnModelScope" data-hub="modelscope">ModelScope</button>
                        </div>
                    </div>
                </div>
                <div class="code-section-header">
                    <div class="code-section-description">Download command:</div>
                    <div style="position: relative;">
                        <button class="code-detail-btn" id="codeDetailBtn" title="">Info</button>
                        <div class="code-detail-panel" id="codeDetailPanel">
                            <div class="code-detail-content"></div>
                        </div>
                    </div>
                </div>
                <div class="code-output" id="codeOutput"></div>
                <div class="code-actions">
                    <button class="btn-selection" id="copyCodeBtn">Copy & Checkout</button>
                </div>
            </div>
        </div>
        
    </div>

    <script type="module" src="./js/main.js?v=20251119-fix-tooltip"></script>
</body>
</html>